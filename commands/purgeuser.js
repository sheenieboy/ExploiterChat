const Discord = require('discord.js');
module.exports = {
    name: 'purgeuser',
    aliases: ['purgeuser'],
    description: 'Delete bulk messages from a certain user!',
    usage: '<Username>',
    cooldown: 2,
    moderatorsOnly: true,
    ownerOnly: false,
    guildOnly: true,
    async run(client, message, args, con) {
        message.channel.messages.fetch({
            limit: 1000
        }).then((messages) => { 
            const botMessages = [];
            messages.filter(m => m.author.username.toLowerCase().includes(args[0].toLowerCase())).forEach(msg => botMessages.push(msg))
            message.channel.bulkDelete(botMessages).then(() => {
                message.channel.send("Cleared messages from User").then(msg => msg.delete({
                    timeout: 3000
                }))
            });
        })
    },
};