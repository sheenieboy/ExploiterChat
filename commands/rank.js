const Discord = require('discord.js');

module.exports = {
	name: 'rank',
	aliases: ['rank'],
	description: "Change your ingame rank",
    usage: '<New Rank>',
    moderatorsOnly: true,
	ownerOnly: false, 
	guildOnly: true,
	cooldown: 3,
	run(client, msg, args, con) {
        con.query("SELECT `id` FROM `Users` WHERE `DiscordID` = '" + msg.author.id + "' LIMIT 1", function (err, result) {
            if (result.length) {
                if(args[0]) {
                    msg.channel.send(`Your rank has been set to: ${args[0]}`);
                    con.query("UPDATE `Users` SET `Rank` = '" + args[0] + "' WHERE `id` = '" + result[0].id + "'", function (err, result) { if (err) console.log(err); });
                
                } else { msg.channel.send(`Please state a new role with $rank <new rank>`); }
            } else { msg.channel.send(`You need to link your account to your exploiter chat account. Use the $link <username> <key>`); }
        });
	}
};


