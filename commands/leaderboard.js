const Discord = require('discord.js');

module.exports = {
    name: 'leaderboard',
    aliases: ['leaderboard'],
    description: "Check the leaderboard",
    usage: '',
    moderatorsOnly: false,
    ownerOnly: false, 
    guildOnly: true,
    cooldown: 3,
    run(client, msg, args, con) {
        con.query("SELECT * FROM Users ORDER BY Level DESC LIMIT 10", function (err, result) {
            if (result.length) {
                let usermsg = new Discord.MessageEmbed()
				.setTitle(`Leaderboard`)
				.setColor('76b3fc');
                
                var BoardNumber = 0;
                for (const data of result) {
                    BoardNumber = BoardNumber+1;
                    usermsg.addField(`${BoardNumber}. ${data.Username}`, `Level ${data.Level}`);
                }

                msg.channel.send(usermsg);//.then(Message => { Message.delete({timeout: 5000})})
            } else { msg.channel.send(`There was an error`); }
        });
    }
};